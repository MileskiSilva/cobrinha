<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    #game-container {
      position: relative;
      width: 300px;
      height: 300px;
      border: 1px solid black;
      overflow: hidden;
    }

    .snake,
    .food,
    .snake-body {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: green;
    }

    .food {
      background-color: red;
    }
  </style>
</head>

<body>
  <div id="game-container">
    <div class="snake"></div>
    <div class="food"></div>
  </div>

  <script>
    const gameContainer = document.getElementById("game-container");
    const snake = document.querySelector(".snake");
    const food = document.querySelector(".food");
    let snakeLeft = 0;
    let snakeTop = 0;
    let foodLeft = Math.floor(Math.random() * 15) * 20;
    let foodTop = Math.floor(Math.random() * 15) * 20;
    let snakeBody = [{ left: 0, top: 0 }];
    let direction = "right"; // Inicialmente, a cobra se move para a direita

    function updateSnakePosition() {
      snake.style.left = snakeLeft + "px";
      snake.style.top = snakeTop + "px";
    }

    function updateFoodPosition() {
      food.style.left = foodLeft + "px";
      food.style.top = foodTop + "px";
    }

    function updateSnakeBody() {
      snakeBody.push({ left: snakeLeft, top: snakeTop });
    }

    document.addEventListener("keydown", (event) => {
      if (event.key === "ArrowLeft" && direction !== "right") {
        direction = "left";
      } else if (event.key === "ArrowRight" && direction !== "left") {
        direction = "right";
      } else if (event.key === "ArrowUp" && direction !== "down") {
        direction = "up";
      } else if (event.key === "ArrowDown" && direction !== "up") {
        direction = "down";
      }
    });

    function moveSnake() {
      if (direction === "left") {
        snakeLeft -= 20;
      } else if (direction === "right") {
        snakeLeft += 20;
      } else if (direction === "up") {
        snakeTop -= 20;
      } else if (direction === "down") {
        snakeTop += 20;
      }
    }

    function moveSnakeBody() {
      for (let i = snakeBody.length - 1; i > 0; i--) {
        snakeBody[i] = { ...snakeBody[i - 1] };
      }
      snakeBody[0] = { left: snakeLeft, top: snakeTop };
    }

    function renderSnakeBody() {
      document.querySelectorAll(".snake-body").forEach((bodyElement) => {
        bodyElement.remove();
      });

      snakeBody.forEach((part) => {
        const bodyElement = document.createElement("div");
        bodyElement.classList.add("snake-body");
        bodyElement.style.left = part.left + "px";
        bodyElement.style.top = part.top + "px";
        gameContainer.appendChild(bodyElement);
      });
    }

    function checkCollision() {
      if (
        snakeLeft < 0 ||
        snakeTop < 0 ||
        snakeLeft >= 300 ||
        snakeTop >= 300
      ) {
        clearInterval(gameInterval);
        alert("Game Over!");
      }
    }

    function updateGame() {
      moveSnake();
      moveSnakeBody();
      checkCollision();
      renderSnakeBody();
      if (snakeLeft === foodLeft && snakeTop === foodTop) {
        foodLeft = Math.floor(Math.random() * 15) * 20;
        foodTop = Math.floor(Math.random() * 15) * 20;
        updateFoodPosition();
        updateSnakeBody();
      }
      updateSnakePosition(); // Adicione esta linha
    }

    const gameInterval = setInterval(updateGame, 100);

    updateFoodPosition();
  </script>
</body>

</html>